var uploader=angular.module("ui.ng-uploader",[]).directive("ngUploader",["uploaderFactory","$log",function(e,t){return{data:e.data,restrict:"AEC",templateUrl:"template.html",link:function(e,n,r){e.wtf;e.fileList=[];e.concurrency=typeof r.concurrency=="undefined"?2:r.concurrency;e.concurrency=parseInt(e.concurrency);e.parameter=typeof r.name=="undefined"?"file":r.name;e.activeUploads=0;e.getSize=function(e){var t=["n/a","bytes","KB","MB","GB","TB","PB","EiB","ZiB","YiB"];var n=+Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(n?1:0)+" "+t[isNaN(e)?0:n+1]};n.find("input").bind("change",function(t){var n=t.target.files;for(var r=0;r<n.length;r++){e.fileList.push({parameter:e.parameter,active:false,filename:n[r].name,file:n[r],value:0/n[r].size*100,size:0,total:e.getSize(n[r].size)})}e.$apply()});e.erase=function(n){t.info("file erased=");e.fileList.splice(e.fileList.indexOf(n),1)};e.onProgress=function(n,r){t.info("progress="+r);n.value=r/n.file.size*100;n.size=e.getSize(r);e.$apply()};e.onCompleted=function(n){t.info("file uploaded="+n.filename);e.activeUploads-=1;e.fileList.splice(e.fileList.indexOf(n),1);e.$apply();e.startUpload()};e.startUpload=function(){t.info("URL="+r.ngUploader);for(var n in e.fileList){if(e.activeUploads==e.concurrency){break}if(e.fileList[n].active)continue;e.ajaxUpload(e.fileList[n])}};e.ajaxUpload=function(t){var n,i,s,o="",u=""||"file",a;console.log("Beging upload: "+t.filename);e.activeUploads+=1;t.active=true;n=new window.XMLHttpRequest;i=new window.FormData;n.open("POST",r.ngUploader);n.upload.onloadstart=function(){console.log("Upload started: "+t.filename)};n.upload.onprogress=function(n){if(!n.lengthComputable){return}console.log("File: "+t.filename);e.onProgress(t,n.loaded)};n.onload=function(n){console.log("Upload completed: "+t.filename);e.onCompleted(t)};n.onerror=function(){console.log("Upload failed: ",t.filename)};if(o){for(s in o){if(o.hasOwnProperty(s)){console.log("Adding data: "+s+" = "+o[s]);i.append(s,o[s])}}}i.append(u,t.file,t.parameter);n.send(i);return n}}}}]).factory("uploaderFactory",function(){return{data:4454,startUpload:function(){alert("funcaaa")}}})